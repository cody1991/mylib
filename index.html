<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=0">
    <meta content="telephone=no" name="format-detection" />
    <link rel="shortcut icon" href="http://cody1991.github.io/img/icon.png" />
    <link rel="stylesheet" type="text/css" href="css/font-awesome-4.2.0/css/font-awesome.min.css">
    <link rel="stylesheet" type="text/css" href="indexStyle.css">
    <title>Cody's Library Introduction</title>
</head>

<body>
    <div class="container">
        <h3>用ajax加载list.json文件来动态生成下面的css和js文件列表。首页的js代码里面可以修改baseUrl，主要来确定是自己的github库还是公司的github库的域名。这个库里面还有source文件夹，来存放每个涉及到的项目的完整源文件和自己写的Demo，而framework文件夹则放着基本的HTML模板。（点击按钮可以进入到相对于的文件的地址）</h3>

        <div id="yourSelect">
            <p>选择了：</p>
            <p></p>
        </div>

        <p>Style</p>
        <ul id="styleList" class="List">
            <img src="ajax-loader.gif" class="loading_icon ajax1">
        </ul>

        <p>Javascript</p>
        <ul id="jsList" class="List">
            <img src="ajax-loader.gif" class="loading_icon ajax2">
        </ul>

        <a href="https://github.com/cody1991/mylib" class="github">
            <span class="github_icon">
                <i class="fa fa-github fa-2x"></i>
            </span>
            <p>Cody's Library.2014</p>
        </a>
    </div>




    <script type="text/javascript">
    var thisUrl = window.location.href;
    if (thisUrl.indexOf('github') > 0) {
        baseUrl = "http://cody1991.github.io/mylib/";
    } else if (thisUrl.indexOf('playwx') > 0) {
        baseUrl = "http://www.playwx.com/hd/static/codyLib/";
    }
    document.write("<script src ='" + baseUrl + "js/jquery-1.10.2.min.js' type='text/javascript' ><\/script> ")
    </script>
    <script type="text/javascript">
    $(document).ready(function() {
        $.ajax({
            type: 'GET',
            url: 'list.json',
            dataType: 'json',
            success: function(data) {
                var listData = data;

                var jsList = listData.jsList;
                var styleList = listData.styleList;

                console.log(jsList);
                console.log(styleList);

                for (var i = 0; i < jsList.length; i++) {
                    var newScriptLi = $('<li>');

                    var thisLink = baseUrl + jsList[i];

                    var temp_link = jsList[i].substr(jsList[i].lastIndexOf('/') + 1);
                    newScriptLi.html('<a target="_blank" href="' + thisLink + '">' + temp_link + '</a>');
                    $('#jsList').append(newScriptLi);
                }
                for (var i = 0; i < styleList.length; i++) {
                    var newStyleLi = $('<li>');
                    var thisLink = baseUrl + styleList[i];
                    var temp_link = styleList[i].substr(styleList[i].lastIndexOf('/') + 1);
                    newStyleLi.html('<a target="_blank" href="' + thisLink + '">' + temp_link + '</a>');
                    $('#styleList').append(newStyleLi);
                }

                $('.List li a').click(function(e) {
                        e.preventDefault();
                        var selectUrl = $(this).attr('href');
                        $('#yourSelect').fadeIn().find('p').eq(1).html(selectUrl);
                        $('.container').animate({
                            'padding-top': '70px'
                        })
                    })
                    // for (var i = 0; i < styleList.length; i++) {
                    //     var newStyle = $('<link>');
                    //     newStyle.attr('href', baseUrl + styleList[i]);
                    //     newStyle.attr('rel', 'stylesheet');
                    //     $('head').append(newStyle);
                    // }
                    // for (var i = 0; i < jsList.length; i++) {
                    //     var newScript = $('<script>');
                    //     newScript.attr('src', baseUrl + jsList[i]);
                    //     newScript.attr('type', 'text/javascript');
                    //     $('body').append(newScript);
                    // }

                var ajax_loader_interval1 = setInterval(function() {
                    if ($('#jsList li').length > 0) {
                        $('.ajax1').hide();
                        $('#jsList').animate({
                            'padding-bottom': '0'
                        })
                        clearInterval(ajax_loader_interval1);
                    }
                }, 50);
                var ajax_loader_interval2 = setInterval(function() {
                    if ($('#styleList li').length > 0) {
                        $('.ajax2').hide();
                        $('#styleList').animate({
                            'padding-bottom': '0'
                        })
                        clearInterval(ajax_loader_interval2);
                    }
                }, 50);
            }
        })
    })
    </script>

</body>

</html>
